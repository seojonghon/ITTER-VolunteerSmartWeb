# <span id='top'> 🤝 ITEER Report💻</span>

## 1. 💻 프로젝트 개요
메인사진

### 1-1. 프로젝트 명

### ITEER(It Volunteer Web)
> **IT 교육  봉사 스마트웹 🌸**
### 1-2. 프로젝트 개발 배경
##### 파이썬,자바,아두이노등  IT관련 봉사활동은 봉사활동 건수 자체가 적고 검색 하여 찾기 힘들다고 판단했습니다.  게다가 IT 시대의 급격한 변화를 어려워하는 노인분들이 증가하고 있고 중,고등 학생들이 코딩에 대한 관심도가 증가하면서  쓰기 간편한 IT 특화 봉사활동 웹을 만들어 사용자들은 IT교육이 필요할 때 멘토링을 요청하고 멘토링 교육을 받음으로써 직접적인 도움을 받을 수 있게 하는것이 목표입니다.

### 1-3. 활용방안 및 기대효과

##### 웹의 사용자들이 선호하는 IT관련 분야(C, JAVA, Javascript, 아두이노, 스크래치 등)를 선택하여 가입하고 it 계열의 봉사활동  참여가 가능하게 했습니다.또한,  IT관련 교육 봉사활동을 완료하면 일정한 포인트를 지급하여 봉사활동 뱃지, 프로필 꾸미기,달력  등  봉사자들이 만든 수공예품을 구매할 수 있도록 하여 봉사활동의  참여도를 높일 수 있을 것이라고 생각합니다.
## 2. 👥 팀 소개
|                                                                                                                                   |                                               서종훈                                                |                                               이학현|                                                   이지은|                                                   최민준                                                   |
| :---------------: | :-----------------------------------------------------------------: | :------------------------------------------------: | :------------------: | :--------         |
|  |                 ![Static Badge](https://img.shields.io/badge/Team%20Leader-%23FE642E) ![Static Badge](https://img.shields.io/badge/Development-%235882FA)                 |                ![Static Badge](https://img.shields.io/badge/Development-%235882FA)                | ![Static Badge](https://img.shields.io/badge/Development-%235882FA) | ![Static Badge](https://img.shields.io/badge/UI%20%2F%20UX-%23BE81F7) |
- #### 서종훈(BE) : DB 관리 ,회원가입 , 배포, 봉사 게시판 구현

- ####  이학현(BE) : 명세서 작성, 유저 게시판 및 활동 포인트  구현

- #### 이지은(BE) : 1365 크롤링  , 유저 게시판 및 관리자 페이지  구현

- #### 최민준(FE) : 기능별 화면 프론트단 구성 및 구현




## 3. 🗓️ 개발 기간 (23년 3월 ~ 23년 7월)

### ⏰ 월별 프로젝트 마일스톤
|                 | 내용                                                    |
| :---------------------: | ------------------------------------------------------- |
| 3월<br>  | - 프로젝트 기획, 주제 선정, 관련 기술 분석, 기술 스택 및 협업툴 결정 (Notion, Discord)                                      |
|     4월<br>      | - 기능별화면설계(WireFrame, UI), DB구축, 웹 개발 진행|
|     5월<br>      | - 오류 수정,중간발표, 발표 피드백                     |
| 6월<br> | -  추가기능 개발(1365사이트 공고 크롤링, 관리자 페이지) API 문서 작성                                      |
|    7월 <br>    | - 테스트 및 사이트 최적화, 지속적인 오류 모니터링, AWS배포 개시, 보고서 작성<br>                     |                         
                                  

## 4. 📡 개발 및 운영 환경

### 📊 기술 스택

 ![Static Badge](https://img.shields.io/badge/Spring%20Boot-6DB33F?logo=Spring%20Boot&logoColor=%23FFFFFF)  ![Static Badge](https://img.shields.io/badge/MySQL-4479A1?logo=MySQL&logoColor=%23FFFFFF)  ![Static Badge](https://img.shields.io/badge/Vue.js-4FC08D?logo=Vue.js&logoColor=%23FFFFFF)  ![Static Badge](https://img.shields.io/badge/Java-007396?logo=Java&logoColor=%23FFFFFF)
 ![Static Badge](https://img.shields.io/badge/AWS-FF9900?logo=Amazon%20AWS&logoColor=%23FFFFFF) ![Static Badge](https://img.shields.io/badge/Bootstrap-7952B3?logo=Bootstrap&logoColor=%23FFFFFF)

### ⌨️ 개발 환경

- 종훈
	- OS: ![Static Badge](https://img.shields.io/badge/Windows%2010-%230078D6?logo=Windows%2010&logoColor=%23FFFFFF)
	- Editor: ![Static Badge](https://img.shields.io/badge/IntelliJ%20IDEA-000000?logo=IntelliJ%20IDEA&logoColor=%23FFFFFF)
- 학현
	- OS: ![Static Badge](https://img.shields.io/badge/macOS-000000?logo=macOS&logoColor=%23FFFFFF)
	- IDE: ![Static Badge](https://img.shields.io/badge/IntelliJ%20IDEA-000000?logo=IntelliJ%20IDEA&logoColor=%23FFFFFF)
- 지은
	- OS: ![Static Badge](https://img.shields.io/badge/Windows%2010-%230078D6?logo=Windows%2010&logoColor=%23FFFFFF)
	- IDE: ![Static Badge](https://img.shields.io/badge/IntelliJ%20IDEA-000000?logo=IntelliJ%20IDEA&logoColor=%23FFFFFF)
- 학현
	- OS: ![Static Badge](https://img.shields.io/badge/macOS-000000?logo=macOS&logoColor=%23FFFFFF)
	- IDE: ![Static Badge](https://img.shields.io/badge/IntelliJ%20IDEA-000000?logo=IntelliJ%20IDEA&logoColor=%23FFFFFF)
### 💡 배포 운영 환경

- ![Static Badge](https://img.shields.io/badge/AWS-FF9900?logo=Amazon%20AWS&logoColor=%23FFFFFF) 
- ![Static Badge](https://img.shields.io/badge/Amazon%20VPC-232F3E?logo=Amazon%20VPC&logoColor=%23FFFFFF) ![Static Badge](https://img.shields.io/badge/Amazon%20EC2-232F3E?logo=Amazon%20EC2&logoColor=%23FFFFFF)  
- DB: ![Static Badge](https://img.shields.io/badge/Amazon%20RDS-FF9900?logo=Amazon%20RDS&logoColor=%23FFFFFF)

### ☎️ Communication Tool: Discord

#### 채널 구성

```
- CHAT CHANNEL
	# 라운지
	# 공지
	# 아이디어
	# 레퍼런스
	# 이슈
	# 질문
	# 파일-및-코드
- VOICE CHANNEL
	# 미팅
```
- \# 라운지: 자유롭게 토론
- \# 공지: 미팅, 일정, 회의록 공지
- \# 아이디어: 번뜩이는 아이디어
- \# 레퍼런스: 참고할만한 서비스, 자료 레퍼런스
- \# 이슈: 개발 및 프로젝트 진행에 있어 생기는 이슈
- \# 질문: 진짜 아무 질문이나
- \# 파일-및-코드: 파일 및 코드 공유
- \# 미팅: 보이스 & 페이스 미팅

## 5. 👨‍💻 서비스 기능👩‍💻


### 5.1. 서비스 기능

#### 회원 가입

- 사용자가 회원 정보(이름, 이메일, 비밀번호)를 입력하여 새로운 계정을 생성
- 입력된 비밀번호는 해시로 암호화되어 데이터베이스에 저장됨

#### 로그인

- 등록된 사용자가 자신의 계정으로 로그인할 수 있음
- 인증을 위해 사용자 이름과 비밀번호를 확인하고 세션을 유지

#### 봉사 활동 상세페이지, 관심 등록(찜기능)

- 해당 봉사 활동의 세부페이지 확인가능
- 관심있는 봉사 활동 관심목록에 저장 

#### 봉사 활동 신청

- 로그인한 사용자가 관심 있는 봉사 항목 신청 가능 
- 해당 봉사 활동 관련 내용이 데이터베이스에 저장됨
- 봉사 신청할 때 주소,이름 요구 

#### 봉사 활동 모집 게시판 조회

- 작성한 게시물은 로그인한 사용자, 로그인하지 않은 사용자 모두가 볼 수 있음

#### 봉사 활동 모집 게시판 수정,삭제

- 게시판 공유자 또는 관리자 권한을 가진 사용자만 해당 글을 수정, 삭제 할 수 있음

#### 봉사 활동시 봉사활동 마다  포인트 지급

-  봉사 활동 완료시 해당 봉사 활동에 설정 되어 있는 포인트 지급

#### 포인트 상점 기능

- 봉사 활동으로 모은 포인트로 포인트 물품 구매 기능 
- 해당 사용자의 데이터베이스에 저장된 포인트값을 사용

#### 관리자 페이지 기능

-  관리자 권한으로 DB에 저장된 사용자 개인정보를 수정/삭제 가능
-  관리자 권한이 있는 루트 사용자만 접근 가능

####  1365 크롤링

- 1365에 있는 봉사 목록을 크롤링 해옴
- 모든 봉사 활동을 불러와서 개발에 적용이 힘듬

## 📊 6. API 명세
 | index | method | URI	| Description |
|------|------|------|------|
| 1| POST|/api/members | 회원가입 요청 보냄
| 2| GET|/api/items|메인 화면 봉사 목록 출력
| 3| GET|/api/cart/items| 관심목록 아이템 조화
|4 |DELETE|/api/cart/items/${itemId}|관심목록 아이템 삭제
|5|POST | /api/account/login | 로그인 요청 보냄
|6|POST | /api/orders|봉사활동 신청
|7|GET |/api/orders| 봉사활동 신청 목록 불러옴
|8|POST | /api/porders | 포인트 물품 구매 신청
|9|GET | /api/pitems | 포인트 상점 물품 목록 불러옴
|10|GET | /api/pcart/pitems | 포인트 관심 등록 물품 가져옴
|11|POST | /api/porders | 포인트 물품 구매 신청
|12|GET | /api/posts | 게시판 목록 불러옴
|13|GET | /api/posts/{int:post_id} | 게시판 상세 조화
|14|DELETE|/api/posts/{int:post_id}|게시물 삭제
|15|POST|/api/posts/forms|게시물 등
|16|GET|/api/posts/forms/{int:post_id}|게시물 등
|17|PUT|/api/posts/forms/{int:post_id}|게시물 수정
|18|GET|/api/point|포인트 값 
#### 6-1. REST 구성 요소

-   URI는  **`리소스`**  의 위치를 식별하는 고유 식별자
-   HTTP Method는 해당 자원에 대한  **`행위`**
-   JSON 형식으로 자원을  **`표현`**

#### 6-2. REST 규칙
-   URI를 복수 명사로 구성
-   동사로 표현되는 행위는 HTTP 메서드로 표현
-   URI를 소문자로만 구성
-   / 로 계층 관계를 표현
-   HTTP Status Code를 사용해 응답

#### 6-3. JWT Token을 통한 사용자 인증 정보 검증

#### Response Body를 통한 토큰 전달

-   사용자 로그인 시 4개의 인증 토큰을 발급해 Response Body로 클라이언트에 전달
-   처음 설계 시에는 Set-Cookie를 통해 브라우저의 쿠키 저장소에 저장하고, 인증이 필요한 API 사용 시 이를 꺼내 요청하도록 설계하였음
Secure 옵션을 True로 설정해야 하며 이는 HTTPS 적용이 되어있지 않은 현재 API 서버에는 적용 불가능
    -   이 이슈는 Cookie의 근본적인 보안 결함에서 기인하였기에 Cookie 대신 브라우저의 Local Storage에 토큰을 저장하는 방식을 채택
    
  #### 6-4. JWT 토큰 검증 로직

1.  클라이언트가 Endpoint로 HTTP 요청
2.  Flask가 해당 엔드포인트를 처리할 함수를 호출하기 전에 @jwt_required 데코레이터가 요청을 가로챔
3.  @jwt_required 데코레이터는 요청에서 JWT 토큰을 추출
    -   토큰은 HTTP 요청 헤더의 Authorization 헤더에서 Bearer 스키마를 사용해 전달됨
4.  추출된 JWT 토큰이 라이브러리에 의해 검증됨
    -   JWT 토큰의 서명이 올바른지 확인
    -   토큰이 만료되지 않았는지 확인
    -   Claims가 유효한지 확인
5.  요청이 유효하면 해당 엔드포인트를 처리할 함수를 호출하고, 유효하지 않으면 401 Unauthorized Status Code 반환
## 7. 💾 DataBase

### 7-1. DB 테이블 목록
 | index | Table | Description |
|------|------|------|
| 1| members | 유저 데이터 저장
| 2| items| 봉사 활동 목록 저장
| 3| cart | 봉사 활동 관심 등록 저장
|4|login | 유저 로그인 
|5|orders | 봉사 활동 신청 결과 저장
|6|porders | 포인트 물품 구매 결과 저장
|7|pitems | 포인트 물품 목록 저장
|8|posts | 게시판 정보 저장
|9|point | 포인트 내역 저장
#### 기존의 로컬 개발 환경에서는 MySQL사용 -> 배포 환경 RDS로 Migration
### Database Migration

- 운영 서버에서는 SQLite가 아닌 오픈소스 RDBMS인 PostgreSQL를 사용하기로 결정
	- 여러 가지 이유가 있는데, 대표적인 이유는
	    - SQLite는 서버를 따로 두고 통신할 수 없기 때문에 인스턴스가 있는 로컬에서 DB를 운용해야 함
	    - 아직은 데이터를 대규모로 처리할 일은 없지만 운영 서버에 배포한 만큼 그 부분을 고려하고 싶었음, SQLite는 동시성에 제한이 있어 운영 서버에는 부적합
- AWS에서 PostgreSQL RDS 데이터베이스를 생성

#### 스프링부트 DB연결 설정 변경
```
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.url=jdbc:mysql://goon-mysql.cucsn1bidzkc.us-east-1.rds.amazonaws.com:3306/gallery
spring.datasource.username=admin
spring.datasource.password=password
```
## 8. Front-end와 Back-end 통신

### 8-1. HTTP 요청 - request
- HTTP 요청과 관련된 정보를 처리하려면 'request' 객체를 사용
- 이 객체는 현재 요청과 관련된 다양한 정보를 제공하며 HTTP 메서드, URL, 헤더, 쿼리 문자열, 폼 데이터, JSON 데이터 및 기타 요청 데이터에 접근할 수 있도록 도와줌
- 본 프로젝트에서는 Blueprint, API 호출 모듈에서 주로 사용
- 'request' 객체를 사용해 얻을 수 있는 주요 정보
	1.  **HTTP 메소드**: `request.method`를 통해 현재 요청의 HTTP 메소드를 얻을 수 있음
		- 예를 들어, GET, POST, PUT, DELETE 등의 메소드가 반환됨
	2.  **URL 정보**: `request.url`은 현재 요청의 전체 URL을 나타냄
	3.  **헤더 정보**: `request.headers`는 HTTP 요청 헤더의 딕셔너리를 반환
		- 예를 들어, `request.headers['User-Agent']`를 사용하여 사용자 에이전트(User-Agent) 헤더를 얻을 수 있음
	4.  **쿼리 문자열**: `request.args`는 URL의 쿼리 문자열 파라미터를 딕셔너리로 반환
		- 예를 들어, `/search?query=example` URL에서 `request.args['query']`는 "example" 값을 반환
	5.  **폼 데이터**: `request.form`은 POST 요청의 폼 데이터를 딕셔너리로 반환, HTML 폼에서 제출된 데이터를 처리할 때 유용
	6.  **JSON 데이터**: `request.get_json()`을 사용하여 JSON 요청 본문을 파싱하고 JSON 데이터를 얻을 수 있음
	7.  **파일 업로드**: 파일 업로드가 있는 POST 요청의 경우, `request.files`를 사용하여 업로드된 파일에 접근할 수 있음
	8.  **세션 정보**: `request.session`을 사용하여 현재 요청과 관련된 세션 데이터에 접근할 수 있음

### 8-2 Back-end 서버측에서 API요청을 받아 CRUD매핑

#### 8-2-1. 회원 가입 통신 로직 예시
```
@RestController
@RequestMapping("/api/members")
public class MemberController {  
    private final MemberService memberService;
    @Autowired
    public MemberController(BoardService boardService) {
        this.memberService = memberService;
    }    
```
#### Get 메소드
```
    @GetMapping
    public List<Member> getAllMembers() {
        return memberService.getAllMembers();
    }
```
#### POST 메소드
```
    @PostMapping
    public Member createMember(@RequestBody Member member) {
        return memberService.createMember(member);
    }
```
#### PUT 메소드
```
    @PutMapping("/{id}")
    public ResponseEntity<Member> updateMember(@PathVariable int id, @RequestBody Member member) {
        if (!memberService.getMemberById(id).isPresent()) {
            return ResponseEntity.notFound().build();
        }
        member.setId(id);
        Member updatedMember = memberService.saveMember(member);
        return ResponseEntity.ok(updatedMember);
    }
```
#### DELETE 메소드
```
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteMember(@PathVariable int id) {
        if (!memberService.getMemberById(id).isPresent()) {
            return ResponseEntity.notFound().build();
        }
        memberService.deleteMember(id);
        return ResponseEntity.noContent().build();}}
```
## 7. 🌍 배포

### AWS

- AWS EC2상에 SpringBoot와 Vue.js 배포
- DB는 RDS로 마이그레이션 후 엔드 포인트 지정

### 초기 서버 환경 설정

- git 명령어로 clone 해온 뒤에 requirements.txt를 통해 라이브러리 설치
	-> 개발 환경과 같은 환경으로 서버 구성

```bash
git clone https://github.com/seojonghon/ITTER-VolunteerSmartWeb-.git
```

### 웹 서버와 애플리케이션 서버 분리

- 개발 환경에서는 그냥 'flask run' 명령어를 사용해 애플리케이션을 구동함
	- 이는 주로 개발이나 디버깅 목적으로 사용됨
	- 단일 스레드로 동작하며 병렬 처리와 높은 트래픽을 처리하기에는 적합하지 않음
	- 보안과 성능 측면에서는 이 방식으로 직접 인터넷으로 노출하는 것은 권장되지 않음
	- 실행과 설정은 매우 편리함
- 운영 서버에서는 WSGI와 Web Server를 사용
	- 웹 서버와 애플리케이션 서버(WSGI)를 분리하여 높은 성능, 확장성, 보안 제공
	- WSGI는 동적 컨텐츠 생성 및 애플리케이션 로직 실행 담당
	- Web Server는 정적 파일 서빙, 로드 밸런싱, 보안 설정 등을 처리

#### Web Server

- 웹 서버는 클라이언트로부터 HTTP 요청을 수신하고, 정적 파일(HTML, CSS, 이미지 등)을 서비스하며, 동적 컨텐츠를 생성하는 웹 애플리케이션 서버나 애플리케이션 서버에 요청을 전달하는 역할
- 주로 정적 컨텐츠를 서비스하는 역할을 하며, 웹 서버로는 Apache, Nginx, IIS 등이 있음
- WSGI 서버만 구동해도 애플리케이션이 작동하는 데에는 문제가 없음, 근데 왜 WAS 앞에 웹 서버를 두는지?
	- 로드 밸런싱: 여러 웹 서버 인스턴스 간에 트래픽을 분산
	- 보안 및 인증: SSL/TLS 인증서 관리 및 보안 설정을 처리
	- 리버스 프록시: 동적 컨텐츠를 생성하는 애플리케이션 서버로 요청을 전달
	- 사실 위와 같은 기능도 이제 WSGI, WAS에서 지원하지만, 결정적으로 WAS는 잘 죽음
		- 애플리케이션 로직이 동작하기 때문
	- 따라서 웹 서버, WAS를 둘 다 두고 정적 리소스가 많이 사용되면 웹 서버를 증설하고, 애플리케이션 리소스가 많이 사용되면 WAS 증설

```
## ⚙️8.향후 계획 및 확장성
- UX (사용자 경험) 개선

- 봉사활동 후기 작성시 사진 첨부 기능 등 확장

- 봉사, 주문 통계 데이터 분석 활용

- SQL 인젝션 공격 방어 등 보안 강화

- 카카오 API를 이용한 로그인, 지도 API를 이용한 장소 표시

- 사용자 정보에 따른 추천 기능 

- 봉사 신청 받을 시 서버에서 해당 내용 취합하여 팀 구성 후 봉사팀에 공지
