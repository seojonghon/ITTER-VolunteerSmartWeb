
# ITTER-VolunteerSmartWeb-
# <span id='top'> 🤝 ITEER Report💻</span>

## 1. 💻 프로젝트 개요
<img  src="https://raw.githubusercontent.com/seojonghon/ITTER-VolunteerSmartWeb-/main/img/%EB%A9%94%EC%9D%B8%ED%99%94%EB%A9%B4.png"  alt="main_page">

### 1-1. 프로젝트 명![pioint상.PNG](https://github.com/seojonghon/ITTER-VolunteerSmartWeb/blob/main/img/pioint%EC%83%81.PNG?raw=true)

### ITEER(It Volunteer Web)
> **IT 교육  봉사 스마트웹 🌸**
### 1-2. 프로젝트 개발 배경
##### 파이썬,자바,아두이노등  IT관련 봉사활동은 봉사활동 건수 자체가 적고 검색 하여 찾기 힘들다고 판단했습니다.  게다가 IT 시대의 급격한 변화를 어려워하는 노인분들이 증가하고 있고 중,고등 학생들이 코딩에 대한 관심도가 증가하면서  쓰기 간편한 IT 특화 봉사활동 웹을 만들어 사용자들은 IT교육이 필요할 때 멘토링을 요청하고 멘토링 교육을 받음으로써 직접적인 도움을 받을 수 있게 하는것이 목표입니다.

### 1-3. 활용방안 및 기대효과

##### 웹의 사용자들이 선호하는 IT관련 분야(C, JAVA, Javascript, 아두이노, 스크래치 등)를 선택하여 가입하고 it 계열의 봉사활동  참여가 가능하게 했습니다.또한,  IT관련 교육 봉사활동을 완료하면 일정한 포인트를 지급하여 봉사활동 뱃지, 프로필 꾸미기,달력  등  봉사자들이 만든 수공예품을 구매할 수 있도록 하여 봉사활동의  참여도를 높일 수 있을 것이라고 생각합니다.

### 1-4. 시스템 아키텍쳐 && WireFrame

- 아키텍쳐

<img src="https://raw.githubusercontent.com/seojonghon/ITTER-VolunteerSmartWeb-/main/img/%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png" alt="main_page">

- 메인 화면 구상

<img src="https://raw.githubusercontent.com/seojonghon/ITTER-VolunteerSmartWeb-/main/img/%EC%99%80%EC%9D%B4%EC%96%B4%20%ED%94%84%EB%A0%88%EC%9E%841.png" alt="main_page">

- 세부 페이지

<img src="https://raw.githubusercontent.com/seojonghon/ITTER-VolunteerSmartWeb-/main/img/%EC%99%80%EC%9D%B4%EC%96%B4%20%ED%94%84%EB%A0%88%EC%9E%842.png" alt="main_page">

### 1-5. Front-end Back-end 코드 라인 수 집계
![전체 코드라인 .png](https://github.com/seojonghon/ITTER-VolunteerSmartWeb/blob/main/img/%EC%A0%84%EC%B2%B4%20%EC%BD%94%EB%93%9C%EB%9D%BC%EC%9D%B8%20.png?raw=true)

#### Front-end 
![프론트 코드수.PNG](https://github.com/seojonghon/ITTER-VolunteerSmartWeb/blob/main/img/%ED%94%84%EB%A1%A0%ED%8A%B8%20%EC%BD%94%EB%93%9C%EC%88%98.PNG?raw=true)

#### Back-end
![back 코드수.PNG](https://github.com/seojonghon/ITTER-VolunteerSmartWeb/blob/main/img/back%20%EC%BD%94%EB%93%9C%EC%88%98.PNG?raw=true)
## 2. 👥 팀 소개
|                                                                                                                                   |                                               서종훈                                                |                                               이학현|                                                   이지은|                                                   최민준                                                   |
| :---------------: | :-----------------------------------------------------------------: | :------------------------------------------------: | :------------------: | :--------         |
|  |                 ![Static Badge](https://img.shields.io/badge/Team%20Leader-%23FE642E) ![Static Badge](https://img.shields.io/badge/Development-%235882FA)                 |                ![Static Badge](https://img.shields.io/badge/Development-%235882FA)                | ![Static Badge](https://img.shields.io/badge/Development-%235882FA) | ![Static Badge](https://img.shields.io/badge/UI%20%2F%20UX-%23BE81F7) |
- #### 서종훈(BE) : DB 관리 ,회원가입 , 배포, 봉사 게시판 구현

- ####  이학현(BE) : 명세서 작성, 유저 게시판 및 활동 포인트  구현

- #### 이지은(BE) : 1365 크롤링  , 유저 게시판 및 관리자 페이지  구현

- #### 최민준(FE) : 기능별 화면 프론트단 구성 및 구현




## 3. 🗓️ 개발 기간 (23년 3월 ~ 23년 7월)

### ⏰ 월별 프로젝트 마일스톤
|                 | 내용                                                    |
| :---------------------: | ------------------------------------------------------- |
| 3월<br>  | - 프로젝트 기획, 주제 선정, 관련 기술 분석, 기술 스택 및 협업툴 결정 (Notion, Discord)                                      |
|     4월<br>      | - 기능별화면설계(WireFrame, UI), DB구축, 웹 개발 진행|
|     5월<br>      | - 오류 수정,중간발표, 발표 피드백                     |
| 6월<br> | -  추가기능 개발(1365사이트 공고 크롤링, 관리자 페이지) API 문서 작성                                      |
|    7월 <br>    | - 테스트 및 사이트 최적화, 지속적인 오류 모니터링, AWS배포 개시, 보고서 작성<br>                     |                         
                                  

## 4. 📡 개발 및 운영 환경

### 📊 기술 스택

 ![Static Badge](https://img.shields.io/badge/Spring%20Boot-6DB33F?logo=Spring%20Boot&logoColor=%23FFFFFF)  ![Static Badge](https://img.shields.io/badge/MySQL-4479A1?logo=MySQL&logoColor=%23FFFFFF)  ![Static Badge](https://img.shields.io/badge/Vue.js-4FC08D?logo=Vue.js&logoColor=%23FFFFFF)  ![Static Badge](https://img.shields.io/badge/Java-007396?logo=Java&logoColor=%23FFFFFF)
 ![Static Badge](https://img.shields.io/badge/AWS-FF9900?logo=Amazon%20AWS&logoColor=%23FFFFFF) ![Static Badge](https://img.shields.io/badge/Bootstrap-7952B3?logo=Bootstrap&logoColor=%23FFFFFF)

### ⌨️ 개발 환경

- 종훈
	- OS: ![Static Badge](https://img.shields.io/badge/Windows%2010-%230078D6?logo=Windows%2010&logoColor=%23FFFFFF)
	- Editor: ![Static Badge](https://img.shields.io/badge/IntelliJ%20IDEA-000000?logo=IntelliJ%20IDEA&logoColor=%23FFFFFF)
- 학현
	- OS: ![Static Badge](https://img.shields.io/badge/macOS-000000?logo=macOS&logoColor=%23FFFFFF)
	- IDE: ![Static Badge](https://img.shields.io/badge/IntelliJ%20IDEA-000000?logo=IntelliJ%20IDEA&logoColor=%23FFFFFF)
- 지은
	- OS: ![Static Badge](https://img.shields.io/badge/Windows%2010-%230078D6?logo=Windows%2010&logoColor=%23FFFFFF)
	- IDE: ![Static Badge](https://img.shields.io/badge/IntelliJ%20IDEA-000000?logo=IntelliJ%20IDEA&logoColor=%23FFFFFF)
- 학현
	- OS: ![Static Badge](https://img.shields.io/badge/macOS-000000?logo=macOS&logoColor=%23FFFFFF)
	- IDE: ![Static Badge](https://img.shields.io/badge/IntelliJ%20IDEA-000000?logo=IntelliJ%20IDEA&logoColor=%23FFFFFF)
### 💡 배포 운영 환경

- ![Static Badge](https://img.shields.io/badge/AWS-FF9900?logo=Amazon%20AWS&logoColor=%23FFFFFF) 
- ![Static Badge](https://img.shields.io/badge/Amazon%20VPC-232F3E?logo=Amazon%20VPC&logoColor=%23FFFFFF) ![Static Badge](https://img.shields.io/badge/Amazon%20EC2-232F3E?logo=Amazon%20EC2&logoColor=%23FFFFFF)  
- DB: ![Static Badge](https://img.shields.io/badge/Amazon%20RDS-FF9900?logo=Amazon%20RDS&logoColor=%23FFFFFF)

### ☎️ Communication Tool: Discord

#### 채널 구성

```
- CHAT CHANNEL
	# 라운지
	# 공지
	# 아이디어
	# 레퍼런스
	# 이슈
	# 질문
	# 파일-및-코드
- VOICE CHANNEL
	# 미팅
```
- \# 라운지: 자유롭게 토론
- \# 공지: 미팅, 일정, 회의록 공지
- \# 아이디어: 번뜩이는 아이디어
- \# 레퍼런스: 참고할만한 서비스, 자료 레퍼런스
- \# 이슈: 개발 및 프로젝트 진행에 있어 생기는 이슈
- \# 질문: 진짜 아무 질문이나
- \# 파일-및-코드: 파일 및 코드 공유
- \# 미팅: 보이스 & 페이스 미팅

## 5. 👨‍💻 서비스 기능👩‍💻


### 5.1. 서비스 기능

#### 회원 가입

- 사용자가 회원 정보(이름, 이메일, 비밀번호)를 입력하여 새로운 계정을 생성
- 입력된 비밀번호는 해시로 암호화되어 데이터베이스에 저장됨

#### 로그인

- 등록된 사용자가 자신의 계정으로 로그인할 수 있음
- 인증을 위해 사용자 이름과 비밀번호를 확인하고 세션을 유지

#### 봉사 활동 상세페이지, 관심 등록(찜기능)

- 해당 봉사 활동의 세부페이지 확인가능
- 관심있는 봉사 활동 관심목록에 저장 

#### 봉사 활동 신청

- 로그인한 사용자가 관심 있는 봉사 항목 신청 가능 
- 해당 봉사 활동 관련 내용이 데이터베이스에 저장됨
- 봉사 신청할 때 주소,이름 요구 

#### 봉사 활동 모집 게시판 조회

- 작성한 게시물은 로그인한 사용자, 로그인하지 않은 사용자 모두가 볼 수 있음

#### 봉사 활동 모집 게시판 수정,삭제

- 게시판 공유자 또는 관리자 권한을 가진 사용자만 해당 글을 수정, 삭제 할 수 있음

#### 봉사 활동시 봉사활동 마다  포인트 지급

-  봉사 활동 완료시 해당 봉사 활동에 설정 되어 있는 포인트 지급

#### 포인트 상점 기능

- 봉사 활동으로 모은 포인트로 포인트 물품 구매 기능 
- 해당 사용자의 데이터베이스에 저장된 포인트값을 사용

#### 관리자 페이지 기능

-  관리자 권한으로 DB에 저장된 사용자 개인정보를 수정/삭제 가능
-  관리자 권한이 있는 루트 사용자만 접근 가능

####  1365 크롤링

- 1365에 있는 봉사 목록을 크롤링 해옴
- 모든 봉사 활동을 불러와서 개발에 적용이 힘듬

## 📊 6. API 명세
 | index | method | URI	| Description |
|------|------|------|------|
| 1| POST|/api/members | 회원가입 요청 보냄
| 2| GET|/api/items|메인 화면 봉사 목록 출력
| 3| GET|/api/cart/items| 관심목록 아이템 조화
|4 |DELETE|/api/cart/items/${itemId}|관심목록 아이템 삭제
|5|POST | /api/account/login | 로그인 요청 보냄
|6|POST | /api/orders|봉사활동 신청
|7|GET |/api/orders| 봉사활동 신청 목록 불러옴
|8|POST | /api/porders | 포인트 물품 구매 신청
|9|GET | /api/pitems | 포인트 상점 물품 목록 불러옴
|10|GET | /api/pcart/pitems | 포인트 관심 등록 물품 가져옴
|11|POST | /api/porders | 포인트 물품 구매 신청
|12|GET | /api/posts | 게시판 목록 불러옴
|13|GET | /api/posts/{int:post_id} | 게시판 상세 조화
|14|DELETE|/api/posts/{int:post_id}|게시물 삭제
|15|POST|/api/posts/forms|게시물 등
|16|GET|/api/posts/forms/{int:post_id}|게시물 등
|17|PUT|/api/posts/forms/{int:post_id}|게시물 수정
|18|GET|/api/point|포인트 값 
#### 6-1. REST 구성 요소

-   URI는  **`리소스`**  의 위치를 식별하는 고유 식별자
-   HTTP Method는 해당 자원에 대한  **`행위`**
-   JSON 형식으로 자원을  **`표현`**

#### 6-2. REST 규칙
-   URI를 복수 명사로 구성
-   동사로 표현되는 행위는 HTTP 메서드로 표현
-   URI를 소문자로만 구성
-   / 로 계층 관계를 표현
-   HTTP Status Code를 사용해 응답

#### 6-3. JWT Token을 통한 사용자 인증 정보 검증

#### Response Body를 통한 토큰 전달

-   사용자 로그인 시 4개의 인증 토큰을 발급해 Response Body로 클라이언트에 전달
-   처음 설계 시에는 Set-Cookie를 통해 브라우저의 쿠키 저장소에 저장하고, 인증이 필요한 API 사용 시 이를 꺼내 요청하도록 설계하였음
Secure 옵션을 True로 설정해야 하며 이는 HTTPS 적용이 되어있지 않은 현재 API 서버에는 적용 불가능
    -   이 이슈는 Cookie의 근본적인 보안 결함에서 기인하였기에 Cookie 대신 브라우저의 Local Storage에 토큰을 저장하는 방식을 채택

  #### 6-4. JWT 토큰 검증 로직

1.  클라이언트가 Endpoint로 HTTP 요청
2.  Flask가 해당 엔드포인트를 처리할 함수를 호출하기 전에 @jwt_required 데코레이터가 요청을 가로챔
3.  @jwt_required 데코레이터는 요청에서 JWT 토큰을 추출
    -   토큰은 HTTP 요청 헤더의 Authorization 헤더에서 Bearer 스키마를 사용해 전달됨
4.  추출된 JWT 토큰이 라이브러리에 의해 검증됨
    -   JWT 토큰의 서명이 올바른지 확인
    -   토큰이 만료되지 않았는지 확인
    -   Claims가 유효한지 확인
5.  요청이 유효하면 해당 엔드포인트를 처리할 함수를 호출하고, 유효하지 않으면 401 Unauthorized Status Code 반환
## 7. 💾 DataBase

### 7-1. DB 테이블 목록
 | index | Table | Description |
|------|------|------|
| 1| members | 유저 데이터 저장
| 2| items| 봉사 활동 목록 저장
| 3| cart | 봉사 활동 관심 등록 저장
|4|login | 유저 로그인 
|5|orders | 봉사 활동 신청 결과 저장
|6|porders | 포인트 물품 구매 결과 저장
|7|pitems | 포인트 물품 목록 저장
|8|posts | 게시판 정보 저장
|9|point | 포인트 내역 저장

### 7-2. SpringBoot와 Maira DB연동 과정
1. 의존성 추가: `pom.xml` 파일에 MariaDB JDBC 드라이버 의존성을 추가해야 함. 아래 코드를 `<dependencies>` 섹션에 추가
```
<dependency>
    <groupId>org.mariadb.jdbc</groupId>
    <artifactId>mariadb-java-client</artifactId>
    <version>버전</version>
</dependency>
```
2. `application.properties` 파일을 설정
```
spring.datasource.url=jdbc:mariadb://localhost:8000/gallery
spring.datasource.username=admin
spring.datasource.password=password
```
3. 스프링 부트 설정: `@SpringBootApplication` 어노테이션이 있는 메인 클래스에 `@EnableJpaRepositories` 어노테이션을 추가
```
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.data.jpa.repository.config.EnableJpaRepositories;

@SpringBootApplication
@EnableJpaRepositories
public class YourApplication {
    public static void main(String[] args) {
        SpringApplication.run(YourApplication.class, args);
    }
}
```
4. 엔티티 및 리포지토리 생성: 데이터베이스와 연동하여 작업할 엔티티 클래스와 해당 엔티티를 조작하는 리포지토리 인터페이스를 생성
#### Item엔티티(Item.java)
```
package org.africalib.gallery.backend.entity;

import lombok.Getter;

import javax.persistence.*;

@Getter
@Entity
@Table(name = "items")
public class Item {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;

    @Column(length = 50, nullable = false)
    private String name;

    @Column
    private String imgPath;

    @Column
    private int price;

    @Column
    private int discountPer;

    @Column
    private String Content;
}
```
#### Member 엔티티(Member.java)
```
package org.africalib.gallery.backend.entity;

import lombok.Getter;

import javax.persistence.*;

@Getter
@Entity
@Table(name = "members")
public class Member {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;

    @Column(length = 50, nullable = false, unique = true)
    private String email;

    @Column(length = 100, nullable = false)
    private String password;

}
```
### 7-3 Database Migration

#### 기존의 로컬 개발 환경에서는 MySQL사용 -> 배포 환경 RDS로 Migration
![RDS DB연결.PNG](https://github.com/seojonghon/ITTER-VolunteerSmartWeb/blob/main/img/RDS%20DB%EC%97%B0%EA%B2%B0.PNG?raw=true)
#### 스프링부트 DB연결 설정 변경
```
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.url=jdbc:mysql://goon-mysql.cucsn1bidzkc.us-east-1.rds.amazonaws.com:3306/gallery
spring.datasource.username=admin
spring.datasource.password=password
```
## 8. Back-end 주요 디렉토리와 용도

### 8-1. AccountController.java
- 프로젝트에서 계정 관련 API를 처리하는 `AccountController` 클래스
- 사용자의 로그인, 로그아웃, 계정 확인과 관련된 기능을 제공
#### 주요 메서드 
1.  `ogin()` 메서드는 POST 요청을 통해 사용자의 로그인을 처리
전달된 요청 파라미터를 통해 `memberRepository`를 사용하여 이메일과 비밀번호로 회원을 조회
회원이 존재하면 JWT 토큰을 생성하고, 이를 클라이언트에게 전달하기 위해 HTTP 응답 헤더의 쿠키에 토큰을 설정하고  회원이 존재하지 않을 경우 `HttpStatus.NOT_FOUND` 상태를 반환
    
2.  `logout()` 메서드는 POST 요청을 통해 사용자의 로그아웃을 처리
쿠키를 사용하여 토큰을 제거하기 위해 `Cookie` 객체를 생성하고, 이를 클라이언트에게 전달하기 위해 HTTP 응답 헤더에 쿠키를 추가합니다.
    
3.  `check()` 메서드는 GET 요청을 통해 사용자의 계정 확인을 처리
 `@CookieValue` 어노테이션을 사용하여 요청 헤더의 쿠키에서 토큰을 추출하고 추출한 토큰을 사용하여 JWT 토큰의 클레임을 확인
 클레임에서 사용자의 ID를 추출하여 반환하고 토큰이 유효하지 않을 경우 `null`을 반환합니다.

### 8-2. BoardController.java
이 컨트롤러는 게시판에 대한 CRUD(Create, Read, Update, Delete) 기능을 제공

1. `getAllBoards()` 메서드는 모든 게시글을 가져오는 GET 요청을 처리 `boardService`를 사용해서 모든 게시글을 조회한 뒤, 조회된 게시글 리스트를 반환

2. `createBoard()` 메서드는 새로운 게시글을 생성하는 POST 요청을 처리해. 요청 바디에 담긴 게시글 정보를 사용해서 새로운 게시글을 생성하고, 생성된 게시글을 반환

3. `updateBoard()` 메서드는 게시글을 수정하는 PUT 요청을 처리. 요청 URL의 경로 변수로 게시글의 ID를 받고, 요청 바디에 담긴 게시글 정보를 사용해서 해당 ID의 게시글을 수정
만약 해당 ID의 게시글이 존재하지 않을 경우 `ResponseEntity.notFound().build()`를 반환, 수정된 게시글을 `ResponseEntity.ok()`를 사용해서 반환

4. `deleteBoard()` 메서드는 게시글을 삭제하는 DELETE 요청을 처리해. 요청 URL의 경로 변수로 게시글의 ID를 받고, 해당 ID의 게시글을 삭제해. 만약 해당 ID의 게시글이 존재하지 않을 경우 `ResponseEntity.notFound().build()`를 반환, 삭제 후 `ResponseEntity.noContent().build()`를 사용해서 응답을 반환

### 8-3. ItemController.java
프로젝트에서 아이템(Item)과 관련된 API를 처리하는 `ItemController` 클래스
이 컨트롤러는 봉사 활동 목록에 대한 조회 기능을 제공

1. `getItems()` 메서드는 GET 요청을 통해 모든 아이템을 가져오는 기능을 처리 `itemRepository`를 사용하여 모든 아이템을 조회한 뒤, 조회된 아이템 리스트를 반환

### 8-4. OrderController.java
프로젝트에서 주문(Order)과 관련된 API를 처리하는 `OrderController` 클래스이 컨트롤러는 주문에 대한 조회와 주문 생성 기능을 제공

1. `getOrder()` 메서드는 GET 요청을 통해 특정 회원의 주문 목록을 가져오는 기능을 처리. 요청 헤더의 쿠키에서 토큰을 추출하여 유효성을 검사하고, 토큰이 유효하지 않을 경우 `HttpStatus.UNAUTHORIZED` 예외를 발생시킴. 유효한 토큰일 경우 회원 ID를 추출하여 해당 회원의 주문 목록을 ID의 내림차순으로 조회한 뒤, 조회된 주문 목록을 반환.

2. `pushOrder()` 메서드는 POST 요청을 통해 주문을 생성하는 기능을 처리. 요청 바디에 담긴 주문 정보를 사용하여 새로운 주문을 생성하고, 회원 ID와 주문 정보를 설정합니다. 생성된 주문을 저장한 뒤, 해당 회원의 장바구니(cart)를 삭제.

### 8-5. WebCrawlerController.java
프로젝트에서 웹 크롤링(Web Crawling)을 수행하는 `WebCrawlerController` 클래스. 이 컨트롤러는 지정된 URL에서 데이터를 크롤링하여 가져오는 기능을 제공

`crawlData()` 메서드는 GET 요청을 통해 데이터 크롤링을 수행지정된 URL에서 데이터를 가져와서 List<String> 형태로 반환. 크롤링된 데이터는 `crawledData` 리스트에 추가
해당 URL에 접속하여 HTML 문서를 가져온 뒤, 선택자를 사용하여 원하는 요소를 선택.  "dt.txts"와 "dt.tit_board_list" 선택자를 사용하여 해당 태그의 텍스트를 가져와서 크롤링된 데이터로 추가

### 8-6. SwaggerConfig.java
- Swagger는 API 문서화와 테스트를 도와주는 도구로, 개발자가 API 엔드포인트 및 요청/응답 모델을 쉽게 확인하고 테스트할 수 있도록 도와주는 용도
- 이렇게 설정된 `SwaggerConfig` 클래스를 사용하면 Spring Boot 애플리케이션에서 Swagger를 활용하여 API 문서화와 테스트를 수행할 수 있습니다. 추가로 필요한 내용이 있으면 언제든지 말씀해주세요.
Spring Boot 프로젝트에서 Swagger를 설정



## 9. Service && DTO(Data Transfer Object)

### 9-1. JwtServiceImpl.java
JWT (JSON Web Token)를 생성하고 검증하는 서비스인 `JwtServiceImpl` 클래스.
 `JwtService` 인터페이스를 구현하며, JWT를 생성하고 해석하는 여러 메서드를 제공

1.  `getToken(String key, Object value)`: 주어진 키와 값으로 JWT를 생성하여 반환하는 메서드. JWT에는 헤더, 클레임 (claim), 서명이 포함. 주어진 키와 값은 JWT의 클레임에 추가. JWT는 지정된 만료 시간까지 유효하며, 서명에는 비밀 키인 `secretKey`가 사용.
    
2.  `getClaims(String token)`: 주어진 JWT를 해석하여 클레임 정보를 반환하는 메서드. JWT의 서명을 검증하고, 유효한 경우 클레임 정보를 가져옴. JWT가 만료되었거나 유효하지 않은 경우 예외가 발생
    
3.  `isValid(String token)`: 주어진 JWT가 유효한지 확인하는 메서드. `getClaims` 메서드를 사용하여 JWT를 해석하고, 해석된 클레임이 존재하는 경우 유효한 JWT로 간주
    
4.  `getId(String token)`: 주어진 JWT에서 클레임으로부터 ID 값을 가져오는 메서드. JWT가 유효하고 클레임에 ID가 있는 경우 해당 ID를 반환
    

-> 	JWT를 사용하여 인증 및 권한 부여를 구현할 때 사용. 예를 들어, 사용자가 로그인하여 인증된 후에 JWT를 생성하고 클라이언트에게 제공. 클라이언트는 이 JWT를 이후의 요청에 포함시켜 서버에 전달하며, 서버는 JWT를 검증하여 사용자의 신원을 확인하고 필요한 권한을 부여. 이를 통해 안전하고 효율적인 인증 및 권한 제어를 구현가능

### 9-2. BoardService.java
`BoardRepository`를 사용하여 `Board` 엔티티에 대한 CRUD (Create, Read, Update, Delete) 작업을 수행하는 서비스
1.  `getAllBoards()`: 모든 게시판을 가져오는 메서드 `boardRepository.findAll()`을 호출하여 모든 게시판을 반환
    
2.  `createBoard(Board board)`: 게시판을 생성하는 메서드 boardRepository.save(board)를 호출하여 새로운 게시판을 저장하고 생성된 게시판을 반환
    
3.  `getBoardById(int id)`: 주어진 ID에 해당하는 게시판을 가져오는 메서드`boardRepository.findById(id)`를 호출하여 해당 ID의 게시판을 Optional로 반환
    
4.  `saveBoard(Board board)`: 게시판을 저장하는 메서드. `boardRepository.save(board)`를 호출하여 주어진 게시판을 저장하고 저장된 게시판을 반환
    
5.  `deleteBoard(int id)`: 주어진 ID에 해당하는 게시판을 삭제하는 메서드`boardRepository.deleteById(id)`를 호출하여 해당 ID의 게시판을 삭제

#### 9-3. OrderDto 
주문과 관련된 데이터를 전달하기 위한 DTO

이 클래스의 필드
-   `name`: 주문자의 이름을 나타내는 문자열 필드
-   `address`: 주문자의 주소를 나타내는 문자열 필드
-   `payment`: 결제 방법을 나타내는 문자열 필드
-   `cardNumber`: 카드 번호를 나타내는 문자열 필드
-   `items`: 주문한 항목들을 나타내는 문자열 필드

주문 정보를 전달하기 위한 데이터 객체로 사용
예를 들어, 주문 서비스에서 클라이언트(프론트 엔드)로부터 입력받은 주문 정보를 `OrderDto` 객체로 매핑하여 전달하거나, 주문 정보를 처리하는 과정에서 `OrderDto` 객체를 사용하여 데이터를 전달. 이를 통해 주문과 관련된 데이터를 효율적으로 전달하고 관리가능

## 10. Front-end와 Back-end 통신
### 10-1. 통신 프로세스
1.  클라이언트 요청:
    
    -   Front-end (클라이언트)는 사용자의 요청에 따라 Back-end에 데이터를 요청. 
    -   요청은 HTTP 메서드(GET, POST, PUT, DELETE 등)와 요청 URL, 필요한 데이터 (파라미터, 헤더, 본문 등)로 구성
2.  서버 라우팅:
 
    -   Back-end 서버는 클라이언트의 요청을 받으면 해당 요청을 처리할 수 있는 적절한 핸들러 또는 컨트롤러로 라우팅
    -   라우팅은 주로 URL 패턴 또는 엔드포인트와 핸들러 또는 컨트롤러의 매핑
3.  요청 처리:
    
    -   Back-end의 핸들러 또는 컨트롤러는 클라이언트의 요청을 처리
    -   이 단계에서는 필요한 비즈니스 로직을 수행하고, 데이터베이스, 외부 API 등의 리소스와 상호작용하여 데이터를 가져오거나 변경가능
4.  데이터 응답:
    
    -   Back-end는 클라이언트에게 응답을 생성
    -   응답은 주로 JSON, XML, HTML 등의 형식으로 클라이언트에 전달
    -   응답에는 상태 코드, 헤더 정보, 본문 데이터 등이 포함
5.  클라이언트 처리:
    
    -   Front-end는 Back-end로부터 받은 응답을 처리
    -   이 단계에서는 받은 데이터를 파싱하고, 화면에 표시하거나 다른 로직에 활용
    -   클라이언트는 필요한 경우 추가적인 요청을 생성하여 데이터를 요청하거나 다른 동작을 수행다.
6.  추가 요청 및 응답:
    
    -   위의 단계를 반복하여 클라이언트와 서버 간의 추가적인 요청과 응답이 이루어짐
    -   클라이언트는 사용자의 동작에 따라 계속적으로 Back-end와 통신하여 데이터를 업데이트가능

#### -  Front-end와 Back-end 간의 통신은 클라이언트의 요청과 서버의 응답을 주고받으며, 데이터 처리와 상호작용을 통해 웹 애플리케이션의 동작을 구현. 통신은 주로 HTTP(S) 프로토콜을 사용하며, 데이터 형식은 주로 JSON을 활용
### 10-2. HTTP 요청 - request
- HTTP 요청과 관련된 정보를 처리하려면 'request' 객체를 사용
- 이 객체는 현재 요청과 관련된 다양한 정보를 제공하며 HTTP 메서드, URL, 헤더, 쿼리 문자열, 폼 데이터, JSON 데이터 및 기타 요청 데이터에 접근할 수 있도록 도와줌
- 'request' 객체를 사용해 얻을 수 있는 주요 정보
	1.  **HTTP 메소드**: `request.method`를 통해 현재 요청의 HTTP 메소드를 얻을 수 있음
		- 예를 들어, GET, POST, PUT, DELETE 등의 메소드가 반환됨
	2.  **URL 정보**: `request.url`은 현재 요청의 전체 URL을 나타냄
	3.  **헤더 정보**: `request.headers`는 HTTP 요청 헤더의 딕셔너리를 반환
		- 예를 들어, `request.headers['User-Agent']`를 사용하여 사용자 에이전트(User-Agent) 헤더를 얻을 수 있음
	4.  **쿼리 문자열**: `request.args`는 URL의 쿼리 문자열 파라미터를 딕셔너리로 반환
		- 예를 들어, `/search?query=example` URL에서 `request.args['query']`는 "example" 값을 반환
	5.  **폼 데이터**: `request.form`은 POST 요청의 폼 데이터를 딕셔너리로 반환, HTML 폼에서 제출된 데이터를 처리할 때 유용
	6.  **JSON 데이터**: `request.get_json()`을 사용하여 JSON 요청 본문을 파싱하고 JSON 데이터를 얻을 수 있음
	7.  **파일 업로드**: 파일 업로드가 있는 POST 요청의 경우, `request.files`를 사용하여 업로드된 파일에 접근할 수 있음
	8.  **세션 정보**: `request.session`을 사용하여 현재 요청과 관련된 세션 데이터에 접근할 수 있음

### 10-3 Back-end 서버측에서 API요청을 받아 CRUD매핑

####  회원 가입 통신 로직 예시
```
@RestController
@RequestMapping("/api/members")
public class MemberController {  
    private final MemberService memberService;
    @Autowired
    public MemberController(BoardService boardService) {
        this.memberService = memberService;
    }    
```
#### Get 메소드
```
    @GetMapping
    public List<Member> getAllMembers() {
        return memberService.getAllMembers();
    }
```
#### POST 메소드
```
    @PostMapping
    public Member createMember(@RequestBody Member member) {
        return memberService.createMember(member);
    }
```
#### PUT 메소드
```
    @PutMapping("/{id}")
    public ResponseEntity<Member> updateMember(@PathVariable int id, @RequestBody Member member) {
        if (!memberService.getMemberById(id).isPresent()) {
            return ResponseEntity.notFound().build();
        }
        member.setId(id);
        Member updatedMember = memberService.saveMember(member);
        return ResponseEntity.ok(updatedMember);
    }
```
#### DELETE 메소드
```
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteMember(@PathVariable int id) {
        if (!memberService.getMemberById(id).isPresent()) {
            return ResponseEntity.notFound().build();
        }
        memberService.deleteMember(id);
        return ResponseEntity.noContent().build();}}
```
## 11. 🌍 배포

### AWS

- AWS EC2상에 SpringBoot와 Vue.js 배포
- DB는 RDS로 마이그레이션 후 엔드 포인트 지정
#### VueJs 배포
![리액트 배포.PNG](https://github.com/seojonghon/ITTER-VolunteerSmartWeb/blob/main/img/%EB%A6%AC%EC%95%A1%ED%8A%B8%20%EB%B0%B0%ED%8F%AC.PNG?raw=true)
#### SpringBoot 배포
![EC2뱊포.PNG](https://github.com/seojonghon/ITTER-VolunteerSmartWeb/blob/main/img/EC2%EB%B1%8A%ED%8F%AC.PNG?raw=true)

### 초기 서버 환경 설정

- git 명령어로 clone 해온 뒤에 requirements.txt를 통해 라이브러리 설치
	-> 개발 환경과 같은 환경으로 서버 구성

```bash
git clone https://github.com/seojonghon/ITTER-VolunteerSmartWeb-.git
```

### 웹 서버와 애플리케이션 서버 분리

- 개발 환경에서는 그냥 'flask run' 명령어를 사용해 애플리케이션을 구동함
	- 이는 주로 개발이나 디버깅 목적으로 사용됨
	- 단일 스레드로 동작하며 병렬 처리와 높은 트래픽을 처리하기에는 적합하지 않음
	- 보안과 성능 측면에서는 이 방식으로 직접 인터넷으로 노출하는 것은 권장되지 않음
	- 실행과 설정은 매우 편리함
- 운영 서버에서는 WSGI와 Web Server를 사용
	- 웹 서버와 애플리케이션 서버(WSGI)를 분리하여 높은 성능, 확장성, 보안 제공
	- WSGI는 동적 컨텐츠 생성 및 애플리케이션 로직 실행 담당
	- Web Server는 정적 파일 서빙, 로드 밸런싱, 보안 설정 등을 처리

#### Web Server

- 웹 서버는 클라이언트로부터 HTTP 요청을 수신하고, 정적 파일(HTML, CSS, 이미지 등)을 서비스하며, 동적 컨텐츠를 생성하는 웹 애플리케이션 서버나 애플리케이션 서버에 요청을 전달하는 역할
- 주로 정적 컨텐츠를 서비스하는 역할을 하며, 웹 서버로는 Apache, Nginx, IIS 등이 있음
- WSGI 서버만 구동해도 애플리케이션이 작동하는 데에는 문제가 없음, 근데 왜 WAS 앞에 웹 서버를 두는지?
	- 로드 밸런싱: 여러 웹 서버 인스턴스 간에 트래픽을 분산
	- 보안 및 인증: SSL/TLS 인증서 관리 및 보안 설정을 처리
	- 리버스 프록시: 동적 컨텐츠를 생성하는 애플리케이션 서버로 요청을 전달
	- 사실 위와 같은 기능도 이제 WSGI, WAS에서 지원하지만, 결정적으로 WAS는 잘 죽음
		- 애플리케이션 로직이 동작하기 때문
	- 따라서 웹 서버, WAS를 둘 다 두고 정적 리소스가 많이 사용되면 웹 서버를 증설하고, 애플리케이션 리소스가 많이 사용되면 WAS 증설

## ⚙️8.향후 계획 및 확장성
- UX (사용자 경험) 개선
- 봉사활동 후기 작성시 사진 첨부 기능 등 확장
- 봉사, 주문 통계 데이터 분석 활용
- SQL 인젝션 공격 방어 등 보안 강화
- 카카오 API를 이용한 로그인, 지도 API를 이용한 장소 표시
- 사용자 정보에 따른 추천 기능 
- 봉사 신청 받을 시 서버에서 해당 내용 취합하여 팀 구성 후 봉사팀에 공지v# ITTER-VolunteerSmartWeb-
